campaignTrail_temp.modBoxTheme = {
     "header_color": "#c26161",
     "header_image_url": "https://i.imgur.com/9I3gPEu.png",
     "header_text_color": "#ffffff",
     "description_text_color": "#000000",
     "description_background_color": "#ffffff",
     "main_color": "#990000",
     "secondary_color": "#e65b5b",
     "ui_text_color": "#FFFFFF"
}

HistHexcolour=["#970417","#2633be","#fbd800","#00a62f"];
        HistName=[" Donald Trump"," Hillary Clinton"," Gary Johnson"," Jill Stein"];
        HistEV=[304,227,0,0];
        HistPV=["62,984,828","65,853,514","4,489,341","405,035"];
        HistPVP=["46.1%","48.2%","3.3%","1.1%"];

RecReading=true
campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 30,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 20,
        "fields": {
            "year": 2016,
            "summary": "<div style='overflow-y:scroll;height:200px;'><p>The last few years have been anything but boring for America. After the 2008 election, where pundits believed the Republican Party would be kept in the national minority for decades, conservatism seemed to be granted a lifeline, as Obama's domestic agenda struggled and his approval ratings took a nosedive. In 2010, the Republicans won a massive victory in the House of Representatives in a shocker, picking up over 63 House seats, which nobody expected even a year prior. The path forward was clear. All signs were predicting a Republican rebound in 2012.<br><br>Yet, 2012 came, and the Democrats walloped the Republicans once again, winning both the Senate and the presidency.<br><br>Obama's administration has been full of failures, from socializing healthcare to funding radical Islamic terrorism. The people of this country demand a true alternative to the incompetence of the Democratic deep state.<br><br>And Ted is going to be the one to bring it.</p></div>",
            "image_url": "https://i.imgur.com/tKO26sx.jpeg",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://i.postimg.cc/KYR61Mth/Ted-advisor-primary.png",
            "recommended_reading": "<h4 style=\"margin-top: 0.5em;\">2016 Republican Primaries</h4><a href=\"https://en.wikipedia.org/wiki/Ted_Cruz_2016_presidential_campaign\" target=\"_blank\">Ted Cruz 2016 Presidential Campaign</a><br><a href=\"https://www.cbsnews.com/news/donald-trump-gop-convention-2016-how-he-got-here/\" target=\"_blank\">Why Trump Won the Primaries</a><h4>2016 Presidential Election</h4><a href=\"https://www.brookings.edu/articles/why-hillary-clinton-lost\">Why Hillary Clinton Lost</a><br><a href=\"https://www.politico.com/story/2016/11/election-results-2016-clinton-trump-231070/\" target=\"_blank\">Trump Pulls Off Major Upset</a><br><br><u><b>A Message From the Creator</b></u><br><br>This is the second mod I've made. My first mod was called 2000 Redux. 2000 Redux was quite rushed and unfinished, and generally was not a very good mod. The issue scores were all messed up and there was not many interesting features or reason to come back after you played a few times. This time around, I tried to make the mod more replayable and enjoyable. Of course it isn't perfect, but we tried our best, and we hope we succeeded in that endeavor.<br><br>Sometimes the errors it would give me coding made me want to bang my head against the wall, but the feeling once everything finally works, it makes everything worth it in the end. I hope you enjoyed this mod as much as I did creating it. For now, this is me signing off.<br><br>Thanks for playing.<br><br>-TheMcCain",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/2012-no-majority.jpg",
            "creator": "themccain",
            "display_year": "2016"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 200,
        "fields": {
            "first_name": "Ted",
            "last_name": "Cruz",
            "election": 20,
            "party": "Republican",
            "state": "Texas",
            "priority": 1,
            "description": "<div style='overflow-y:scroll;height:200px;'><p>Ted Cruz is not your average Cuban-American. Very intelligent and just as awkward, he graduated from Harvard before becoming the Texas Solicitor General, where he argued cases before the U.S. Supreme Court on behalf of the state. With the retirement of Senator Kay Bailey Hutchison, a Senate seat from Texas was up for grabs. Cruz forced a runoff in the Republican primary and defeated David Dewhurst in a major upset, partly through major endorsements by Sarah Palin and many Tea Party groups, amidst a Republican wave in 2012.<br><br>As soon as Cruz stepped into the United States Senate, he became controversial. A devout opponent of gun control, abortion, and tax increases, he was loathed by many of his colleagues for his refusal to compromise, which made him just as popular amongst many tea-partiers and conservatives around the nation. He has built a devoted base not just in Texas, but across the country. Now, an even higher office is up for grabs: the presidency. This isn't going to be easy, though. With an open nomination, several candidates have entered the primary, leading to an ever divided and competitive field. In order to be able to win this election, he must first secure the primary, unite the party, and of course, defeat Hillary Clinton.</p></div>",
            "color_hex": "#A51214",
            "secondary_color_hex": "#D3756A",
            "is_active": 1,
            "image_url": "https://i.imgur.com/eZFXdDw.jpeg",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2016 election.</h3><p>In spite of a hard-fought challenge from Hillary Clinton, you have shocked the world with your election victory.</p><p>On the political front, you have the bully pulpit in your favor, but support in Congress in uncertain. Will you govern as a more traditional conservative, or will you make a break from orthodoxy?</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2016 election.</h3><p>Many of your supporters are despondent that you have faltered to the likes of Hillary Clinton. Republicans in general believe this was a very winnable election, and are enraged that you came in to blow it. Luckily, there are any number of ways for you to take advantage of your newfound exposure. One rumor even has you founding a television station to profit from the aggrieved sensibilities of your followers. The future is in your hands.</p>",
            "no_electoral_majority_message": "<h3>Wow! You have pulled out 2016 election.</h3><p>No candidate secured a majority in the Electoral College. However, the Republicans won a majority in Congress and will elevate you to the Presidency. Time will tell how things go in that regard. Any mutual affection between you and Congress is predicted to be short-lived, but you've pulled off a number of surprises to get this far.</p>",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 201,
        "fields": {
            "first_name": "Hillary",
            "last_name": "Clinton",
            "election": 20,
            "party": "Democrat",
            "state": "New York",
            "priority": 2,
            "description": "<p>As expected, Hillary Clinton has carried her party's nomination, and now faces an unexpected opponent in Donald Trump. She was traditionally known as a mainstream Democrat, but tacked significantly to the left during the primary campaign. Clinton enters the general election in a strong position, but she'll be under relentless attack on a number of fronts. Can she make the case that she truly in touch with the American people -- or that Trump would be an even worse option?</p>",
            "color_hex": "#3435BA",
            "secondary_color_hex": "#8393CF",
            "is_active": 0,
            "image_url": "https://files.catbox.moe/2ee71d.png",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2016 election.</h3><p>In spite of a hard-fought challenge from Donald Trump, you have become the first woman elected to serve as President.</p><p>On the political front, it is unclear how much of your agenda you will be able to push forward with the current Congress. Hopefully your victory has helped Democrats further down the ballot. Start packing and prepare to move back into the White House!</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2016 election.</h3><p>Many of your supporters are despondent that you have faltered to the likes of Donald Trump. Many in the left wing of the party are furious that you pushed their candidate aside, only to lose. Time will tell how Trump operates as President. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>",
            "no_electoral_majority_message": "<h3>Sorry! You have lost the 2016 election.</h3><p>No candidate secured a majority in the Electoral College. However, the Republicans won a majority in Congress and will elevate Trump to the Presidency. Time will tell how things go in that regard. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 202,
        "fields": {
            "first_name": "Gary",
            "last_name": "Johnson",
            "election": 20,
            "party": "Libertarian",
            "state": "New Mexico",
            "priority": 3,
            "description": "'",
            "color_hex": "#FAC800",
            "secondary_color_hex": "#FAD588",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 203,
        "fields": {
            "first_name": "Jill",
            "last_name": "Stein",
            "election": 20,
            "party": "Green",
            "state": "Massachusetts",
            "priority": 4,
            "description": "'",
            "color_hex": "#139740",
            "secondary_color_hex": "#75BD96",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 50000,
        "fields": {
            "first_name": "Carly",
            "last_name": "Fiorina",
            "election": 20,
            "party": "Republican",
            "state": "California",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#A51214",
            "secondary_color_hex": "#D3756A",
            "is_active": 0,
            "image_url": "https://i.imgur.com/8aXb3FF.jpeg",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p><div style='overflow-y:scroll;height:200px;'><p>Carly Fiorina would be an... interesting choice. As one of your former primary opponents and the ex-CEO of corporate giant Hewlett-Packard, she has little political experience, her only foray into politics was a failed 2010 Senate run in California.<br><br>Still, despite being unconventional, Fiorina could offer unique advantages. She might help reclaim portions of the female vote from Hillary Clinton and could serve as a bridge between moderates and conservatives heading into the general election. She also performed well in the primary debates.<br><br>On the other hand, Fiorina’s record at HP is mired in controversy. Thousands of employees were laid off during her tenure, and in 2005 she was forced out by shareholders amid the company’s poor performance. Her corporate past would inevitably become a liability for the ticket.</p></div>",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 50002,
        "fields": {
            "first_name": "Marco",
            "last_name": "Rubio",
            "election": 20,
            "party": "Republican",
            "state": "Florida",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#A51214",
            "secondary_color_hex": "#D3756A",
            "is_active": 0,
            "image_url": "https://files.catbox.moe/czckor.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<div style='overflow-y:scroll;height:200px;'><p>Marco Rubio was one of your main opponents in the primary, ultimately finishing third. Currently serving as a U.S. Senator from Florida, Rubio could be a major asset in that state. He should also help solidify your support among Cuban-Americans, with both of you sharing Cuban heritage. Florida’s 29 electoral votes will prove decisive in this election, and Rubio’s popularity there could be crucial to securing victory on Election Day. He also has bona fides among independent voters and would bring a more moderate voice to the ticket.<br><br>Conversely, the two of you don’t exactly share warm relations, having waged hard-hitting campaigns against each other during the primary. Many of your supporters may be disappointed if you choose him as your running mate. He has also been criticized for coming across as over-polished, and ingenuine, just like you. Still, if you’re looking for a safer pick, he’s an option.</p></div>",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 50001,
        "fields": {
            "first_name": "Scott",
            "last_name": "Walker",
            "election": 20,
            "party": "Republican",
            "state": "Wisconsin",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#A51214",
            "secondary_color_hex": "#D3756A",
            "is_active": 0,
            "image_url": "https://files.catbox.moe/0py7n8.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p>Scott Walker is the current Governor of Wisconsin. Elected in 2010, he pushed a number of conservative policies during his time in office, most notably the Wisconsin Budget Repair Bill, which stripped most public sector workers of collective bargaining rights. The bill sparked massive backlash and quickly led to a recall effort. Walker survived the recall by a wide margin and became highly popular in conservative circles.<br><br>Walker ran for the nomination this cycle but dropped out early after a series of poor performances. He would certainly help you in the Upper Midwest, particularly in his home state of Wisconsin, which is looking close this year. However, if you're trying to expand your coalition, Walker would likely make that task more difficult.",
            "candidate_score": 1,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 118222,
        "fields": {
            "candidate": 200,
            "running_mate": 50000
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 94412,
        "fields": {
            "candidate": 200,
            "running_mate": 50001
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 156797,
        "fields": {
            "candidate": 200,
            "running_mate": 50002
        }
    }
]

campaignTrail_temp.credits = "Themccain"

campaignTrail_temp.opponents_default_json = [
    {
        "election": 20,
        "candidates": [
            200,
            201,
            202,
            203
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 20,
        "candidates": [
            200,
            201,
            202,
            203
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 20,
        "year": 2016,
        "is_premium": 0,
        "display_year": "2016 - Ted Cruz"
    }
]

jet_data = {
    "headerColor": "#f66601",
    "windowColor": "#8640a3",
    "containerColor": "#b15596",
    "innerWindowColor": "#8640a3",
    "bannerImageUrl": "https://i.imgur.com/3iXJcrL.png",
    "backgroundImageUrl": "https://wallpaper-house.com/data/out/7/wallpaper2you_175134.jpg",
    "endingTextColor": "#000000",
    "customQuote": "“I’m not running because I desperately need 99 new friends in the U.S Senate.”\t",
    "gameTitle": "New Campaign Trail"
}

e=campaignTrail_temp

var changeGameDisp = (hide) => {
  disp = "";
  if (hide) {
    disp = "none";
  }
  document.getElementsByClassName("inner_window_w_desc")[0].style.display = disp
};

e.creditsPage = () => {
  credits_html = `
    <h3>Lead Developer</h3>
    <p><font color='#ff9100'>TheMcCain</font></p>
    <h3>Coding</h3>
    <p><font color='#ff9100'>TheMcCain</font></p>
    <h3>Writing</h3>
    <p><font color='#ff9100'>TheMcCain</font></p>
    <p><font color='#4370f7'>theanswerisme</font></p>
    <h3>Theming</h3>
    <p><font color='#4370f7'>theanswerisme</font></p>
    <h3>Miscellaneous</h3>
    <p>mp4clout for making the banner
    <p>DecstarG for the Music Player and Credits Screen</p>
    <p>LiquidAstro for his Further Reading tool 
    <p>General_Rise8708 for playtesting
    <p>Many more people who I talked to and gave me advice over the development of the mod!</p>
    <p>Your name might not be listed here, but your contributions are not forgotten!
    <h3>Music Credit</h3>
    <p>Real Gone - Sheryl Crow</p>
    <p>God Bless the USA - Lee Greenwood</p>
    <p>Where The Stars And Stripes And The Eagle Fly - Aaron Tippin</p>
    <p>The Battle Cry of Freedom - Barrie Hingley</p>
    <h1><font color='#ff9100'>But most importantly...</font></h1>
    <div style='width: 70%;text-overflow: ellipsis;text-align:center;display: block;margin-left: auto;margin-right: auto;'>
    <p>You. Thank you for playing.<p>
    </div>
  `
  changeGameDisp(true);
  var spacer = document.createElement("amongusspacerthisisntarealelement");
  spacer.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
  document
    .getElementsByClassName("inner_window_w_desc")[0]
    .children[1].appendChild(spacer);
    changeGameDisp(true);
    var menuHeader = document.createElement("div");
    menuHeader.classList.add("inner_window_front");
    menuHeader.innerHTML = `<h1 style='font-family: "Trebuchet MS";'><font color='#fc7f03'>Credits</font></h1>`;
    menuHeader.id = "SOTUheader";
    menuHeader.style = "height: 50px;background-color:#2d2d2d";
    var newMenu = document.createElement("div");
    newMenu.classList.add("inner_window_front");
    newMenu.id = "SOTUmenu";
    newMenu.style = `height:260px;background-color:#2d2d2d;color:white;overflow-y: scroll;`;

    newMenu.innerHTML = credits_html;
    let z = document.getElementById("game_window");
    var backButton = document.createElement("button");
    backButton.style =
      "position: relative; bottom: -13px; left: -380px; width: 150px; height: 80px;font-size:40px;padding-top:5px;padding-left:8px";
    backButton.id = "backSOTUBtn";
    backButton.innerHTML = `<b>BACK</b>`;
    backButton.onclick = function () {
      document.getElementById("SOTUheader").remove();
      document.getElementById("SOTUmenu").remove();
      document.getElementById("backSOTUBtn").remove();
      changeGameDisp(false);
    };
    z.appendChild(menuHeader);
    z.appendChild(newMenu);
    z.appendChild(backButton);

}

e.credits = "<button onclick='e.creditsPage()'>Multiple People</button>"

//#startcode

quotes = ["'I’m not running because I desperately need 99 new friends in the U.S Senate.' - Ted Cruz", "'The world is on fire! Yes! Your world is on fire!' - Ted Cruz", "'Let's dispel with this fiction that Barack Obama doesn't know what he's doing. He knows exactly what he's doing'", "'I don't know if sand can glow in the dark, but we're going to find out!' - Ted Cruz", "'I would be happy to invite Trump to church anytime he'd like.' - Ted Cruz", "'I am, you know, adamantly against illegal immigration.' - Hillary Clinton", "'The unions say last hired - first fired.' - Scott Walker", "'If Ted Cruz doesn’t clean up his act & stop doing negative ads, I have standing to sue him.' - Donald Trump", "'I've always won, and I'm going to continue to win. And that's the way it is.' - Donald Trump", "'Choose Cruz!'", "'I don't like losers.' - Donald Trump", "'If we nominate Trump, we will get destroyed ... and we will deserve it.'", "'Sometimes people ask me how I feel about losing my job.' - Carly Fiorina", "I'm just saying, not many conservatives come out of Manhattan.' - Ted Cruz", "'There it is. There it is everybody. The memorized 30 second speech!' - Chris Christie", "'There's nothing more important then knowing the Constitution limits the government, not the people.' - Rand Paul", "'If we stand together, we can bring America back.' - Ted Cruz"]
customquote = quotes[Math.floor((Math.random() * quotes.length))]
corrr = `\n<h2>New Campaign Trail</h2><font id='wittyquote' size='4' color='FFFFFF'><em>` + customquote + `</em></font>`;


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#f66601";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#8640a3";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#b15596";

document.getElementById("header").src = "https://i.imgur.com/3iXJcrL.png";

document.body.background = "https://wallpaper-house.com/data/out/7/wallpaper2you_175134.jpg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#8640a3!important;}</style>";

let style = document.createElement('style');
style.type = 'text/css';
style.id = 'dynamic-style';

style.innerHTML = `
  .campaign_trail_start_emphasis {
    background-color: #8640A3;
  }
  a:-webkit-any-link {
    color: #000000;
  }
    .inner_window_question h3 {
      background-color: #F8E0CF !important;
    }
    .overlay_window h3  {
      background-color: #F8E0CF !important;
    }
    #state_info h3 {
      background-color: #F8E0CF !important;
    }
    #state_result h3 {
      background-color: #F8E0CF !important;
    }
    #overall_result h3 {
      background-color: #F8E0CF !important;
    }
    #menu_container {
      background-color: #8640A3 !important;
    }
.overlay_window {
            height: auto;
		}
    #state_result_container {
      background-color: #8640A3 !important;
    }
#map_container {
  background-color: #F4F1F7 !important;
  background-size: 150% 150%;
  border-radius: 0.75px;
}
.game_header h2 {
  color: #FFF;
}
    #overall_result_container {
      background-color: #8640A3 !important;
`;

document.head.appendChild(style);

//#endcode

// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#999999;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

var soundtracks = {
  0: {
    name: "We Can Bring America Back",
    tracklist: [
       {
        "name": "Real Gone",
        "url": "https://audio.jukehost.co.uk/uSkx8iXE3oQ6BZQ9ZbFqYfPh49SfaMrU"
      },
      {
        "name": "God Bless the U.S.A",
        "url": "https://audio.jukehost.co.uk/A7K1Ha1w2kmRXPz8qC3DcNrQWxQTPTRs"
      },
      {
        "name": "Where The Stars And Stripes And The Eagle Fly",
        "url": "https://audio.jukehost.co.uk/50AuFK2OTd6hRyAMT0VZP1O0yqEXpg9j"
      },
      {
        "name": "The Battle Cry of Freedom (Instrumental)",
        "url": "https://audio.jukehost.co.uk/C961f2ODHf2c26ZefTqoLYADeZWtJwfW"
      },
      {
        "name": "The Caretaker - C1; A Losing Battle Is Raging",
        "url": "https://cdn.discordapp.com/attachments/810034515334004766/1074235126000660490/c1.mp3"
      },
      {
        "name": "The Caretaker - D1; I Still Feel As Though I Am Me",
        "url": "https://cdn.discordapp.com/attachments/810034515334004766/1074235126394929212/d1.mp3"
      },
      {
        "name": "The Caretaker - E1; Back There Benjamin",
        "url": "https://cdn.discordapp.com/attachments/810034515334004766/1074235126654959696/e1.mp3"
      },
      {
        "name": "The Caretaker - E2; And Heart Breaks",
        "url": "https://cdn.discordapp.com/attachments/810034515334004766/1078102500164522044/e2.mp3"
      },
      {
        "name": "The Caretaker - F1; Gradations of Arms Length",
        "url": "https://cdn.discordapp.com/attachments/810034515334004766/1074235126977933413/f1.mp3"
      },
      {
        "name": "The Caretaker - G1; Post Awareness Confusions",
        "url": "https://cdn.discordapp.com/attachments/932087077472993350/1074234695774113792/g1.mp3"
      },
      {
        "name": "The Caretaker - N1; Sudden Time Regression into Isolation",
        "url": "https://cdn.discordapp.com/attachments/932087077472993350/1074234813663420476/n1.mp3"
      },
      {
        "name": "The Caretaker - R1; Place in the World Fades Away",
        "url": "https://cdn.discordapp.com/attachments/932087077472993350/1074233871526268928/r1.mp3"
      }
    ]
  }
}

// Set up new music player

newMusicPlayer()

// Stol- I mean borrowed, from 2016 A Lifetime Of This

e.ElectionPopup = "Alright Ted. Election night is here. You ready?"
e.WinPopup = "You.. you've done it. You actually did it!"
e.LosePopup = "Damned be. It's over, Ted."


